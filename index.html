<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>DevCol - Developer Community</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.9.1/font/bootstrap-icons.css" />
    <!-- Custom CSS -->
    <link rel="stylesheet" href="style.css" />
</head>

<body>
    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg navbar-dark custom-navbar">
        <div class="container">
            <a class="navbar-brand" href="#">DevCol</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item"><a class="nav-link" href="#" style="color: white;">Home</a></li>
                    <li class="nav-item"><a class="nav-link" href="projects.html">Projects</a></li>
                    <li class="nav-item"><a class="nav-link" href="add-post.html">Add Post</a></li>
                    <li class="nav-item"><a class="nav-link" href="bookmarks.html">Bookmarks</a></li>
                    <li class="nav-item">
                        <button class="nav-link btn btn-primary text-white" data-bs-toggle="modal"
                            data-bs-target="#loginModal">Login</button>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Login Modal -->
    <div class="modal fade login-modal" id="loginModal" tabindex="-1" aria-labelledby="loginModalLabel"
        aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="loginModalLabel">Login to DevCol</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="loginForm">
                        <div class="mb-3">
                            <label for="email" class="form-label">Email address</label>
                            <input type="email" class="form-control" id="email" required />
                        </div>
                        <div class="mb-3">
                            <label for="password" class="form-label">Password</label>
                            <input type="password" class="form-control" id="password" required />
                        </div>
                        <div class="mb-3 form-check">
                            <input type="checkbox" class="form-check-input" id="rememberMe" />
                            <label class="form-check-label" for="rememberMe">Remember me</label>
                        </div>
                        <button type="submit" class="btn btn-primary w-100">Login</button>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Hero Section -->
    <header class="hero-section text-white text-center py-5">
        <div class="container">
            <h1>Welcome to DevCol</h1>
            <p>Connect with developers, showcase projects, and collaborate</p>
        </div>
    </header>

    <!-- Posts Section -->
    <section class="container my-5">
        <h2 class="text-center mb-4">Latest Posts</h2>
        <div id="posts-container" class="row g-4">
            <!-- Posts will be inserted dynamically -->
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer bg-dark text-white text-center py-3">
        <p>DevCol &copy; 2025. All rights reserved.</p>
    </footer>

    <!-- Bootstrap Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            // Get existing posts from localStorage or use default data if none exists
            const existingPosts = JSON.parse(localStorage.getItem('posts')) || [];
            const postsData = existingPosts.length > 0 ? existingPosts : [
                { id: 1, title: 'Learning MERN Stack', content: 'MERN stack is powerful for full-stack development.', likes: 0, comments: [], bookmarked: false, followed: false },
                { id: 2, title: 'Understanding React Hooks', content: 'React Hooks simplify state management.', likes: 0, comments: [], bookmarked: false, followed: false },
                { id: 3, title: 'Python for Data Science', content: 'Exploring data analysis and machine learning with Python libraries.', likes: 0, comments: [], bookmarked: false, followed: false },
                { id: 4, title: 'Docker Containerization', content: 'Best practices for containerizing your applications with Docker.', likes: 0, comments: [], bookmarked: false, followed: false },
                { id: 5, title: 'GraphQL vs REST APIs', content: 'Comparing GraphQL and REST for modern API development.', likes: 0, comments: [], bookmarked: false, followed: false },
                { id: 6, title: 'TypeScript Best Practices', content: 'Writing type-safe code with TypeScript in large applications.', likes: 0, comments: [], bookmarked: false, followed: false },
                { id: 7, title: 'CI/CD Pipeline Setup', content: 'Setting up automated deployment pipelines with Jenkins and GitHub Actions.', likes: 0, comments: [], bookmarked: false, followed: false },
                { id: 8, title: 'Vue.js 3 Composition API', content: 'Building scalable components with Vue 3 Composition API.', likes: 0, comments: [], bookmarked: false, followed: false },
                { id: 9, title: 'Microservices Architecture', content: 'Designing and implementing microservices-based applications.', likes: 0, comments: [], bookmarked: false, followed: false },
                { id: 10, title: 'AWS Cloud Solutions', content: 'Leveraging AWS services for scalable cloud applications.', likes: 0, comments: [], bookmarked: false, followed: false },
                { id: 11, title: 'Redux State Management', content: 'Managing complex application state with Redux and middleware.', likes: 0, comments: [], bookmarked: false, followed: false },
                { id: 12, title: 'Node.js Performance', content: 'Optimizing Node.js applications for better performance.', likes: 0, comments: [], bookmarked: false, followed: false },
                { id: 13, title: 'MongoDB Database Design', content: 'Designing efficient MongoDB schemas and queries.', likes: 0, comments: [], bookmarked: false, followed: false },
                { id: 14, title: 'Kubernetes Deployment', content: 'Managing containerized applications with Kubernetes.', likes: 0, comments: [], bookmarked: false, followed: false },
                { id: 15, title: 'Web Security Essentials', content: 'Implementing security best practices in web applications.', likes: 0, comments: [], bookmarked: false, followed: false },
                { id: 16, title: 'Angular Universal SSR', content: 'Server-side rendering with Angular Universal for better SEO.', likes: 0, comments: [], bookmarked: false, followed: false },
                { id: 17, title: 'Git Workflow Strategies', content: 'Advanced Git workflows for team collaboration.', likes: 0, comments: [], bookmarked: false, followed: false },
                { id: 18, title: 'Testing with Jest', content: 'Writing effective unit tests with Jest and React Testing Library.', likes: 0, comments: [], bookmarked: false, followed: false },
                { id: 19, title: 'Progressive Web Apps', content: 'Building offline-capable progressive web applications.', likes: 0, comments: [], bookmarked: false, followed: false },
                { id: 20, title: 'Code Review Guidelines', content: 'Best practices for conducting effective code reviews.', likes: 0, comments: [], bookmarked: false, followed: false },
                { id: 21, title: 'Serverless Architecture', content: 'Building applications using serverless computing services.', likes: 0, comments: [], bookmarked: false, followed: false },
                { id: 22, title: 'CSS Grid and Flexbox', content: 'Modern CSS layout techniques for responsive design.', likes: 0, comments: [], bookmarked: false, followed: false }
            ];

            // Always update localStorage with the latest postsData
            localStorage.setItem('posts', JSON.stringify(postsData));
            const posts = JSON.parse(localStorage.getItem('posts'));

            const postsContainer = document.getElementById('posts-container');

            function renderPosts() {
                postsContainer.innerHTML = '';
                posts.forEach(post => {
                    const postElement = document.createElement('div');
                    postElement.classList.add('col-md-6', 'col-lg-4');
                    postElement.innerHTML = `
            <div class="card custom-card h-100">
              <div class="card-body d-flex flex-column">
                <h5 class="card-title post-title">${post.title}</h5>
                <p class="card-text flex-grow-1">${post.content}</p>
                <div class="d-flex justify-content-between align-items-center mt-3 action-buttons">
                  <button class="btn btn-link like-btn" onclick="likePost(${post.id})">
                    <i class="bi bi-heart-fill"></i>
                    <span id="likes-${post.id}">${post.likes}</span>
                  </button>
                  <button class="btn btn-link bookmark-btn" onclick="bookmarkPost(${post.id})">
                    <i class="bi ${post.bookmarked ? 'bi-bookmark-fill' : 'bi-bookmark'}"></i>
                  </button>
                  <button class="btn btn-link follow-btn" onclick="followPost(${post.id})">
                    <i class="bi ${post.followed ? 'bi-person-check-fill' : 'bi-person-plus'}"></i>
                  </button>
                </div>
                <div class="mt-3">
                  <input type="text" id="comment-${post.id}" placeholder="Add a comment" class="form-control comment-input">
                  <button class="btn btn-sm btn-secondary mt-1" onclick="addComment(${post.id})">Comment</button>
                </div>
                <ul class="list-group mt-2" id="comments-${post.id}"></ul>
              </div>
            </div>
          `;
                    postsContainer.appendChild(postElement);
                });
            }

            window.likePost = function (postId) {
                const post = posts.find(p => p.id === postId);
                post.likes++;
                document.getElementById(`likes-${post.id}`).innerText = post.likes;
                animateButton(`likes-${post.id}`);
                localStorage.setItem('posts', JSON.stringify(posts));
            };

            window.bookmarkPost = function (postId) {
                const post = posts.find(p => p.id === postId);
                post.bookmarked = !post.bookmarked;
                renderPosts();
                localStorage.setItem('posts', JSON.stringify(posts));
            };

            window.followPost = function (postId) {
                const post = posts.find(p => p.id === postId);
                post.followed = !post.followed;
                renderPosts();
                localStorage.setItem('posts', JSON.stringify(posts));
            };

            window.addComment = function (postId) {
                const commentInput = document.getElementById(`comment-${postId}`);
                const commentText = commentInput.value.trim();
                if (commentText) {
                    const post = posts.find(p => p.id === postId);
                    post.comments.push(commentText);
                    commentInput.value = '';
                    renderComments(postId);
                    localStorage.setItem('posts', JSON.stringify(posts));
                }
            };

            function renderComments(postId) {
                const post = posts.find(p => p.id === postId);
                const commentsList = document.getElementById(`comments-${post.id}`);
                commentsList.innerHTML = '';
                post.comments.forEach(comment => {
                    const commentItem = document.createElement('li');
                    commentItem.classList.add('list-group-item', 'comment-item');
                    commentItem.innerText = comment;
                    commentsList.appendChild(commentItem);
                });
            }

            function animateButton(elementId) {
                const el = document.getElementById(elementId);
                el.classList.add('animate');
                setTimeout(() => {
                    el.classList.remove('animate');
                }, 300);
            }

            // Handle login form submission
            document.getElementById('loginForm').addEventListener('submit', function (e) {
                e.preventDefault();
                const email = document.getElementById('email').value;
                const password = document.getElementById('password').value;
                // Here you would typically make an API call to authenticate
                const loginButton = document.querySelector('.nav-item .btn-primary');
                loginButton.classList.remove('btn', 'btn-primary');
                loginButton.innerHTML = '<img src="https://ui-avatars.com/api/?name=User&background=random" class="profile-avatar" alt="Profile">';
                loginButton.style.padding = '0';
                const modal = bootstrap.Modal.getInstance(document.getElementById('loginModal'));
                modal.hide();
            });

            // Render posts on load
            renderPosts();
        });
    </script>
</body>

</html>